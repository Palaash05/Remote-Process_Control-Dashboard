{% extends "main/header.html" %} {% load static %} {% block content %}

<div class="d-sm-flex justify-content-between align-items-center mb-4" style="margin-top: 25px">
    <h2 class="text-dark font-weight-bolder mb-0" style="margin-left: 25px;">
        Dashboard
    </h2>
</div>
<div class="row">
    <div class="col-lg-6 col-xl-6">
        <div class="card shadow mb-4">
            <!-- Title -->
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="text-primary font-weight-bold m-0">Banbury Mixer</h3>
            </div>
            <div class="card-body">
                <!-- Text -->
                <div class="row">
                    <div class="col-8">
                        <h4 class="font-weight-bold">
                            Sheet Width
                        </h4>
                    </div>
                    <div class="col-4">
                        <p class="card-text mb-4 text-right" id="ban_date"></p>
                    </div>
                </div>
                <p class="display-5">Current reading:</p>
                <div class="row">
                    <p class="display-4 font-weight-bold" id="ban_val"></p>
                    <p class="display-4 font-weight-bold" id="ban_unit">mm</p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-6 col-xl-6">
        <div class="card shadow mb-4">
            <!-- Title -->
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="text-primary font-weight-bold m-0">Fabric Calendar</h3>
            </div>
            <div class="card-body">
                <!-- Text -->
                <div class="row">
                    <div class="col-8">
                        <h4 class="font-weight-bold text-left">
                            Heated Roller Temperature
                        </h4>
                    </div>
                    <div class="col-4">
                        <p class="card-text mb-4 text-right" id="fab_date1"></p>
                    </div>
                </div>
                <p class="display-5">Current reading:</p>
                <div class="row">
                    <p class="display-4 font-weight-bold" id="fab_temp"></p>
                    <p class="display-4 font-weight-bold" id="fab_Tunit">°C</p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-6 col-xl-6">
        <div class="card shadow mb-4">
            <!-- Title -->
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="text-primary font-weight-bold m-0">Fabric Calendar</h3>
            </div>
            <div class="card-body">
                <!-- Text -->
                <div class="row">
                    <div class="col-8">
                        <h4 class="font-weight-bold">
                            Width
                        </h4>
                    </div>
                    <div class="col-4">
                        <p class="card-text mb-4 text-right" id="fab_date2"></p>
                    </div>
                </div>
                <p class="display-5">Current reading:</p>
                <div class="row font-success">
                    <p class="display-4 font-weight-bold" id="fab_w"></p>
                    <p class="display-4 font-weight-bold" id="fab_Wunit">mm</p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-6 col-xl-6">
        <div class="card shadow mb-4">
            <!-- Title -->
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="text-primary font-weight-bold m-0">Bead Winder</h3>
            </div>
            <div class="card-body">
                <!-- Text -->
                <div class="row">
                    <div class="col-8">
                        <h4 class="font-weight-bold">
                            Temperature
                        </h4>
                    </div>
                    <div class="col-4">
                        <p class="card-text mb-4 text-right" id="bead_date"></p>
                    </div>
                </div>
                <p class="display-5">Current reading:</p>
                <div class="row">
                    <p class="display-4 font-weight-bold" id="bead_val"></p>
                    <p class="display-4 font-weight-bold" id="bead_unit">°C</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6 col-xl-6">
        <div class="card shadow mb-4">
            <!-- Title -->
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="text-primary font-weight-bold m-0">Treading Cutter</h3>
            </div>
            <div class="card-body">
                <!-- Text -->
                <div class="row">
                    <div class="col-8">
                        <h4 class="font-weight-bold">
                            Position Error
                        </h4>
                    </div>
                    <div class="col-4">
                        <p class="card-text mb-4 text-right" id="tread_date1"></p>
                    </div>
                </div>
                <p class="display-5">Current reading:</p>
                <div class="row font-success">
                    <p class="display-4 font-weight-bold" id="tread_pos"></p>
                    <p class="display-4 font-weight-bold" id="tread_unit1">mm</p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-6 col-xl-6">
        <div class="card shadow mb-4">
            <!-- Title -->
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="text-primary font-weight-bold m-0">Treading Cutter</h3>
            </div>
            <div class="card-body">
                <!-- Text -->
                <div class="row">
                    <div class="col-8">
                        <h4 class="font-weight-bold">
                            Speed Error
                        </h4>
                    </div>
                    <div class="col-4">
                        <p class="card-text mb-4 text-right" id="tread_date2"></p>
                    </div>
                </div>
                <p class="display-5">Current reading:</p>
                <div class="row">
                    <p class="display-4 font-weight-bold" id="tread_speed"></p>
                    <p class="display-4 font-weight-bold" id="tread_unit2">mmps</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6 col-xl-6">
        <div class="card shadow mb-4">
            <!-- Title -->
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="text-primary font-weight-bold m-0">Curing Machine</h3>
            </div>
            <div class="card-body">
                <!-- Text -->
                <div class="row">
                    <div class="col-8">
                        <h4 class="font-weight-bold">
                            Moulding Time
                        </h4>
                    </div>
                    <div class="col-4">
                        <p class="card-text mb-4 text-right" id="cur_date1"></p>
                    </div>
                </div>
                <p class="display-5">Current reading:</p>
                <div class="row font-success">
                    <p class="display-4 font-weight-bold" id="cur_time"></p>
                    <p class="display-4 font-weight-bold" id="cur_unit1">minutes</p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-6 col-xl-6">
        <div class="card shadow mb-4">
            <!-- Title -->
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="text-primary font-weight-bold m-0">Curing Machine</h3>
            </div>
            <div class="card-body">
                <!-- Text -->
                <div class="row">
                    <div class="col-8">
                        <h4 class="font-weight-bold">
                            Moulding Temperature
                        </h4>
                    </div>
                    <div class="col-4">
                        <p class="card-text mb-4 text-right" id="cur_date2"></p>
                    </div>
                </div>
                <p class="display-5">Current reading:</p>
                <div class="row">
                    <p class="display-4 font-weight-bold" id="cur_temp"></p>
                    <p class="display-4 font-weight-bold" id="cur_unit2">°C</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    function dash_request() {

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {

                // Typical action to be performed when the document is ready:
                var data = JSON.parse(xhttp.responseText);
                document.getElementById("ban_val").innerText = data.ban_width
                document.getElementById("ban_date").innerText = data.ban_date
                document.getElementById("ban_val").style.color = Ban_Value(data.ban_width);
                document.getElementById("ban_unit").style.color = Ban_Value(data.ban_width);

                document.getElementById("fab_temp").innerText = data.fab_temp
                document.getElementById("fab_date1").innerText = data.fab_date
                document.getElementById("fab_temp").style.color = Fab_Temp(data.fab_temp);
                document.getElementById("fab_Tunit").style.color = Fab_Temp(data.fab_temp);

                document.getElementById("fab_w").innerText = data.fab_w
                document.getElementById("fab_date2").innerText = data.fab_date
                document.getElementById("fab_w").style.color = Fab_W(data.fab_w);
                document.getElementById("fab_Wunit").style.color = Fab_W(data.fab_w);

                document.getElementById("bead_val").innerText = data.bead_temp
                document.getElementById("bead_date").innerText = data.bead_date
                document.getElementById("bead_val").style.color = Bead_Temp(data.bead_temp);
                document.getElementById("bead_unit").style.color = Bead_Temp(data.bead_temp);

                document.getElementById('tread_pos').innerText = data.tread_pos
                document.getElementById('tread_date1').innerText = data.tread_date
                document.getElementById("tread_pos").style.color = Tread_Pos(data.tread_pos);
                document.getElementById("tread_unit1").style.color = Tread_Pos(data.tread_pos);

                document.getElementById('tread_speed').innerText = data.tread_speed
                document.getElementById('tread_date2').innerText = data.tread_date
                document.getElementById("tread_speed").style.color = Tread_Speed(data.tread_speed);
                document.getElementById("tread_unit2").style.color = Tread_Speed(data.tread_speed);

                document.getElementById('cur_time').innerText = data.cur_time
                document.getElementById('cur_date1').innerText = data.cur_date
                document.getElementById("cur_time").style.color = Cur_Time(data.cur_time);
                document.getElementById("cur_unit1").style.color = Cur_Time(data.cur_time);

                document.getElementById('cur_temp').innerText = data.cur_temp
                document.getElementById('cur_date2').innerText = data.cur_date
                document.getElementById("cur_temp").style.color = Cur_Temp(data.cur_temp);
                document.getElementById("cur_unit2").style.color = Cur_Temp(data.cur_temp);

            }
        };
        xhttp.open("GET", "/dash_json", true);
        xhttp.send();
    }
    setInterval(dash_request, 10000);
    dash_request()
</script>

{% endblock %}